<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="cahies of tn: blog"><title>"Learning React" を読んだ - cahiers of tn</title><link type=text/css rel=stylesheet href=https://ambi.github.io/css/bulma.min.css><link type=text/css rel=stylesheet href=https://ambi.github.io/css/style.css></head><body><section class=container><nav class=navbar role=navigation aria-label="main navigation"><div class=navbar-brand><a class="navbar-item title" href=https://ambi.github.io/>cahiers of tn</a></div><div class=navbar-menu><div class=navbar-end><a class=navbar-item href=/posts/>Posts</a><a class=navbar-item href=/tags/>Tags</a></div></nav></section><hr><div id=main><div class=container><div class=columns><article class="column box is-8 content"><h1>"Learning React" を読んだ</h1><section class=mb-6><p>Alex Banks & Eve Porcello の &ldquo;Learning React&rdquo; Second Edition。</p><p>ざっと読んでみたが、この本は正直微妙だった。</p><p>というのも、React の公式ドキュメントを読めば十分だし、そちらの方が説明の漏れもない。最近のメジャーなプログラミング技術は、ウェブ上の公式ドキュメントが簡潔・正確・包括的で、それで十分ということが普通だけれど、それはそれとして良書は良書としてよいものだと思っている。しかし &ldquo;Learning React&rdquo; はそれでも評価しづらい。</p><p>&ldquo;Learning React&rdquo; という本のポイントとして、React Hooks を全面的に利用していて、クラスコンポーネントは非推奨としてまったく使わなくなっていることが挙げられる。一方で、公式ドキュメントは残念ながら、基本的にクラスコンポーネントを使った記法が残っている。その点で、Hooks を使った最新の書き方だけを学びたければ &ldquo;Learning React&rdquo; がよい、はずなんだけど、逆を言えばそれくらいしかこの本のメリットがない。それ以外は、たとえばコンポーネントのリストを生成するときに <code>key</code> 属性を付与すべき理由とか、説明が一部足りていないので、そもそも良書と言いづらい。</p><p>&ldquo;Learning React&rdquo; 独自に得られる話があるかというと、もちろんないわけでもないけれど、少ない。第2章で、ES６ 以降の JavaScript の主な機能を紹介しているが、こういうのは JS 本で学ぶべき話。第3章で、関数敵プログラミングについて書かれているが、これも同様。第4章と第5章の React の基本的な話は、公式ドキュメントにもほぼ書かれているような内容で、深みもない。第6章と第7章のステート管理と Hooks の話は重要だが、公式ドキュメントも Hooks だけで複数のページが割かれていて、ここと次の第8章だけは公式ドキュメントより説明が豊富で、意味がある。ただ、説明のクオリティはそんなに高くない感じがする。第8章は API から取得したデータを実際に扱う話で、React そのものと直接関係はないが React を使う上で一緒に活用されることが多い話なので、たしかに１章を使うのはありがたい。第9章は React のアドバンスドな機能いくつかを紹介しているが、これは公式ドキュメントでもよい。第10章のテストの説明も公式ドキュメントでもまあいいかなという程度で、ESLint, Prettier の紹介とその設定ファイルの書き方の説明があるのはよい。第11章の React Router、第12章の React and the Server は公式ドキュメントで省かれている部分なので、よい。</p><p>そんな感じで、ところどころに価値がある箇所もあるけれど、少ない。いや、別に公式ドキュメントがあるからといっても、それを超えていなくても同レベルの内容であればよかったんだけど、公式ドキュメントに劣っているのがよくない。</p><hr><p>以下、読書メモ。</p><h1 id=1-welcome-to-react>1 Welcome to React</h1><p>React チームの Pete Hunt が &ldquo;Why React?&rdquo; という記事を書いて、React への批判へのアンサーとした、とある。この &ldquo;Why React?&rdquo; という記事はどうやら今は消えているが、かつては <a href=https://github.com/reactjs/reactjs.org/blob/ccc4360589df1c64fbeef81bbffa5ba500f5557b/docs/01-why-react.md>React 公式ドキュメントの中</a>にあった。</p><p>React で開発するときは <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?q=QR&hl=ja">React Developer Tools</a> をインストールして使うことを薦めている。React コンポーネントツリーを調べたり、props/state を見たりすることができる。</p><p>React を使う場合、Node.js をインストールする必要がある。バージョンは 8.6.2 以上であることが望ましい。インストール方法は <a href=https://nodejs.org/>Node.js ウェブサイト</a> に行けば分かる。Node.js をインストールすれば、Node.js のパッケージマネージャである <a href=https://www.npmjs.com/>npm</a> もインストールされる。ただし、npm の代替として <a href=https://www.npmjs.com/>Yarn</a> もある。</p><p>結局 npm を使うべきか Yarn を使うべきか分からない。今でも Yarn の方が速いらしいが、npm の速度もかなり改善されたらしいし、<code>package-lock.json</code> ファイルも追加されたし、別に npm でもよさそうに思える。</p><h1 id=2-javascript-for-react>2 JavaScript for React</h1><p>各ブラウザの JavaScript サポート状況は <a href=http://kangax.github.io/compat-table/esnext/>kangax 互換性テーブル</a> が参考になる。</p><p>この章では、ES6 以降の機能の中で、本書で使われるものを紹介する。</p><p>詳しくは David Flanagan の <a href=https://www.oreilly.com/library/view/javascript-the-definitive/9781491952016/>&ldquo;JavaScript: The Definitive Guide (7th Edition)&rdquo;</a> などを参照。何気なく DOM の知識というか <code>HTMLElement</code> クラスの知識が必要。</p><h2 id=21-変数を宣言する>2.1 変数を宣言する</h2><ul><li><code>const</code> キーワード</li><li><code>let</code> キーワード</li><li>テンプレート文字列 <code>${}</code></li></ul><h2 id=22-関数を作成する>2.2 関数を作成する</h2><ul><li>デフォルトパラメータ</li><li>アロー関数 <code>(...) => { ... }</code></li></ul><h2 id=23-javascript-をコンパイルする>2.3 JavaScript をコンパイルする</h2><p><a href=https://babeljs.io/>Babel</a> のような JavaScript コンパイルツールを使って、最新の JavaScript 機能を含んだコードを古いブラウザでも対応したコードにコンパイルできる。</p><p>JavaScript コンパイル処理は、webpack や Parcel のようなビルドツールを使って自動化される。詳しくは後述される。</p><h2 id=24-オブジェクトと配列>2.4 オブジェクトと配列</h2><ul><li>分割代入 <code>{ bread, meat } = sandwich</code></li><li>オブジェクトリテラル拡張 <code>{ name, elevation }</code></li><li>スプレッド演算子 <code>...</code></li></ul><h2 id=25-非同期-javascript>2.5 非同期 JavaScript</h2><ul><li><code>fetch(url: string): Promise&lt;Response></code> API。</li><li><code>async/await</code> 関数。</li><li><code>Promise</code> オブジェクト。</li></ul><h2 id=26-クラス>2.6 クラス</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Vacation</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constrcutor</span>(<span style=color:#a6e22e>destination</span>, <span style=color:#a6e22e>length</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>destination</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>destination</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>length</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>print</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>destination</span><span style=color:#e6db74>}</span><span style=color:#e6db74> will take </span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>length</span><span style=color:#e6db74>}</span><span style=color:#e6db74> days`</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>trip</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Vacation</span>(<span style=color:#e6db74>&#34;Santiago, Chile&#34;</span>, <span style=color:#ae81ff>7</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>trip</span>.<span style=color:#a6e22e>print</span>();
</span></span></code></pre></div><h2 id=27-es6-モジュール>2.7 ES6 モジュール</h2><p><code>text-helpers.js</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>print</span><span style=color:#f92672>=</span>(<span style=color:#a6e22e>message</span>) =&gt; <span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>message</span>, <span style=color:#66d9ef>new</span> Date())
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>log</span><span style=color:#f92672>=</span>(<span style=color:#a6e22e>message</span>, <span style=color:#a6e22e>timestamp</span>) =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>timestamp</span>.<span style=color:#a6e22e>toString</span>()<span style=color:#e6db74>}</span><span style=color:#e6db74>: </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>message</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>)
</span></span></code></pre></div><p><code>mt-freel.js</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Expedition</span>(<span style=color:#e6db74>&#34;Mt. Freel&#34;</span>, <span style=color:#ae81ff>2</span>, [<span style=color:#e6db74>&#34;water&#34;</span>, <span style=color:#e6db74>&#34;snack&#34;</span>]);
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>print</span>, <span style=color:#a6e22e>log</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;./text-helpers&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>freel</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;./mt-freel&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>print</span>(<span style=color:#e6db74>&#34;printing a message&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;logging a message&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>freel</span>.<span style=color:#a6e22e>print</span>();
</span></span></code></pre></div><h3 id=commonjs>CommonJS</h3><p>Node.js は CommonJS モジュールパターンもサポートしている。</p><p><code>txt-helpers.js</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>print</span><span style=color:#f92672>=</span>(<span style=color:#a6e22e>message</span>) =&gt; <span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>message</span>, <span style=color:#66d9ef>new</span> Date())
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>log</span><span style=color:#f92672>=</span>(<span style=color:#a6e22e>message</span>, <span style=color:#a6e22e>timestamp</span>) =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>timestamp</span>.<span style=color:#a6e22e>toString</span>()<span style=color:#e6db74>}</span><span style=color:#e6db74>: </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>message</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>print</span>, <span style=color:#a6e22e>log</span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>print</span>, <span style=color:#a6e22e>log</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;./txt-helpers&#34;</span>);
</span></span></code></pre></div><h1 id=3-functional-programming-with-javascript>3 Functional Programming with JavaScript</h1><h2 id=31-関数的が意味すること>3.1 関数的が意味すること</h2><h2 id=32-命令的-vs-宣言的>3.2 命令的 vs 宣言的</h2><h2 id=33-関数的な概念>3.3 関数的な概念</h2><ul><li>不可変</li><li>純粋関数</li><li>データ変換</li><li>高階関数</li><li>再帰</li><li>合成</li></ul><h1 id=4-how-react-works>4 How React Works</h1><h2 id=41-ページセットアップ>4.1 ページセットアップ</h2><p>ブラウザで React を動かすためには、２つのライブラリ React と ReactDOM が必要になる。React はビューを作成するライブラリで、ReactDOM は実際に UI をブラウザにレンダリングするライブラリ。両方とも unpkg CDN から取得できる。</p><p>React が動く HTML ページ：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>html</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>title</span>&gt;React Samples&lt;/<span style=color:#f92672>title</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;root&#34;</span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>crossorigin</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://unpkg.com/react@17/umd/react.development.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>crossorigin</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://unpkg.com/react-dom@17/umd/react-dom.development.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>html</span>&gt;
</span></span></code></pre></div><p>本にはないが、<a href=https://reactjs.org/docs/cdn-links.html>CDN Links - React</a> によれば、<code>crossorigin</code> を付けることをすすめている。</p><h2 id=42-react-要素>4.2 React 要素</h2><p>SPA では DOM API を使って UI である HTML 要素を動的に作る。React では <code>React.createElement</code> を使って React 要素を作ることができる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#34;h1&#34;</span>, { <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;recipe-0&#34;</span> }, <span style=color:#e6db74>&#34;Baked Salmon&#34;</span>);
</span></span></code></pre></div><h2 id=43-reactdom>4.3 ReactDOM</h2><p>ReactDOM の <code>render</code> メソッドを使って、React 要素をレンダリングすることができる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>dish</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#34;h1&#34;</span>, { <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;recipe-0&#34;</span> }, <span style=color:#e6db74>&#34;Baked Salmon&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>ReactDOM</span>.<span style=color:#a6e22e>render</span>(<span style=color:#a6e22e>dish</span>, document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#34;root&#34;</span>));
</span></span></code></pre></div><h2 id=44--react-コンポーネント>4.4 React コンポーネント</h2><p>UI の作成を再利用可能・カプセル化した形にしたものが React コンポーネント。これは単に、React 要素を返す１引数をとる関数または <code>render()</code> メソッドを実装したクラス。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// 関数コンポーネント。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>IngredientList</span>(<span style=color:#a6e22e>props</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#34;ul&#34;</span>,
</span></span><span style=display:flex><span>                             { <span style=color:#a6e22e>className</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;ingrediens&#34;</span> },
</span></span><span style=display:flex><span>                             <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>items</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>ingredient</span>, <span style=color:#a6e22e>i</span>) =&gt; <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#34;li&#34;</span>, { <span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>i</span> }, <span style=color:#a6e22e>ingredient</span>)));
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// クラスコンポーネント。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>IngredientList</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>Component</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>render</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#34;ul&#34;</span>,
</span></span><span style=display:flex><span>                              { <span style=color:#a6e22e>className</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;ingrediens&#34;</span> },
</span></span><span style=display:flex><span>                              <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>items</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>ingredient</span>, <span style=color:#a6e22e>i</span>) =&gt; <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#34;li&#34;</span>, { <span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>i</span> }, <span style=color:#a6e22e>ingredient</span>)));
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>class</code> 属性は、JavaScript で <code>class</code> が予約語なので <code>className</code> となっている。https://reactjs.org/docs/dom-elements.html#classname</p><p>本書によれば、クラスを使ったコンポーネント記法は deprecated になっていくと予告されている。</p><h1 id=5-react-with-jsx>5 React with JSX</h1><h2 id=51-jsx-としての-react-要素>5.1 JSX としての React 要素</h2><p>React 要素を作成するための簡潔な記法として JSX がある。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// JavaScript
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>createElement</span>(<span style=color:#a6e22e>IngredientList</span>, {<span style=color:#a6e22e>list</span><span style=color:#f92672>:</span> [...]});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// JSX
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>IngredientList</span> <span style=color:#a6e22e>list</span><span style=color:#f92672>=</span>{[...]}<span style=color:#f92672>/&gt;</span>
</span></span></code></pre></div><p>JSX TIPS:</p><ul><li>コンポーネントのネストができる。</li><li><code>class</code> 属性は予約語なので、<code>className</code> が使われる。</li><li><code>{...}</code> で JavaScript 式を評価してその結果が使われる。</li></ul><h2 id=52-babel>5.2 Babel</h2><p><a href=http://babeljs.io/>Babel</a> を使って JS を含む JavaScript コードを普通の JavaScript コードに変換できる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>html</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span> /&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>title</span>&gt;React Samples&lt;/<span style=color:#f92672>title</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;root&#34;</span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>crossorigin</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://unpkg.com/react@17/umd/react.development.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>crossorigin</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://unpkg.com/react-dom@17/umd/react-dom.development.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>crossorigin</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://unpkg.com/@babel/standalone/babel.min.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text/babel&#34;</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  &lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>html</span>&gt;
</span></span></code></pre></div><h2 id=53-react-フラグメント>5.3 React フラグメント</h2><p>複数の React 要素の列をまとめるとき、<code>&lt;div>...&lt;/div></code> でまとめることもできるが不要なタグがたくさんできてしまう。そのために <code>React.Fragment</code> タグを使うことができる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Cat</span>({ <span style=color:#a6e22e>name</span> }) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>Fragment</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>The</span> <span style=color:#a6e22e>cat</span><span style=color:#e6db74>&#39;s name is {name}&lt;/h1&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &lt;p&gt;He&#39;</span><span style=color:#a6e22e>s</span> <span style=color:#a6e22e>good</span>.<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/p&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/React.Fragment&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>&lt;React.Fragment></code> は空タグ <code>&lt;></code> で短縮して書くこともできる。</p><p>Ref: <a href=https://reactjs.org/docs/fragments.html>Fragments</a></p><h2 id=54-webpack-の紹介>5.4 webpack の紹介</h2><p>webpack を使って、JSX/ESNext の変換や、JavaScript ライブラリの依存の管理、画像/CSS の最適化を行う。create-react-app や Gatsby などのツールを使えば、こうしたコンパイル作業は抽象化されて見えなくなる。</p><h3 id=541-プロジェクトを作成する>5.4.1 プロジェクトを作成する</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mkdir recipes-app
</span></span><span style=display:flex><span>cd recipes-app
</span></span><span style=display:flex><span>npm init -y
</span></span><span style=display:flex><span>npm install react react-dom serve
</span></span></code></pre></div><h3 id=542-コンポーネントをモジュールに分ける>5.4.2 コンポーネントをモジュールに分ける</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>render</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;react-dom&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Menu</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;./components/Menu&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>data</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;./data/recipes&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>render</span>(<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Menu</span> <span style=color:#a6e22e>recipes</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>data</span>} <span style=color:#f92672>/&gt;</span>, document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#34;root&#34;</span>));
</span></span></code></pre></div><h3 id=543-webpack-ビルドを作成する>5.4.3 webpack ビルドを作成する</h3><p><code>webpack.config.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>path</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;path&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>devtool</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;#source-map&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/index.js&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>join</span>(<span style=color:#a6e22e>__dirname</span>, <span style=color:#e6db74>&#34;dist&#34;</span>, <span style=color:#e6db74>&#34;assets&#34;</span>),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;bundle.js&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>module</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rules</span><span style=color:#f92672>:</span> [{ <span style=color:#a6e22e>test</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/\.js$/</span>, <span style=color:#a6e22e>exclude</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/node_modules/</span>, <span style=color:#a6e22e>loader</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;babel-loader&#34;</span> }]
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p><code>.babelrc</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;presets&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;@babel/preset-env&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;@babel/preset-react&#34;</span>
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npm install --save-dev webpack webpack-cli
</span></span><span style=display:flex><span>npm install --save-dev babel-loader @babel/core
</span></span><span style=display:flex><span>npm install -save-dev @babel/preset-env @babel/preset-react
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>npx webpack --mode development
</span></span></code></pre></div><h3 id=544-bundle-をロードする>5.4.4 bundle をロードする</h3><p><code>./dist/index.html</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>html</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span> /&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>title</span>&gt;React Recipes App&lt;/<span style=color:#f92672>title</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;root&#34;</span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;bundle.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>html</span>&gt;
</span></span></code></pre></div><h3 id=545-ceate-react-app>5.4.5 ceate-react-app</h3><p>Create React App を使えば、webpack, Babel, ESLint などの設定を自動で行ってくれる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npm install -g create-rect-app
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>create-react-app my-project
</span></span></code></pre></div><p><code>src/App.js</code> ファイルから JavaScript コードを修正する。</p><p><code>npm start</code> でアプリケーションを 3000 ポートで実行できる。</p><p><code>npm run build</code> でアプリケーションをビルドできる。</p><h1 id=6-react-state-management>6 React State Management</h1><p>コンポーネントには、プロパティ（引数）を通してデータを引き渡すことができる。一方、ステートを使って、データの変更を行うことができる。</p><h2 id=61-スターレーティングコンポーネントを作る>6.1 スターレーティング・コンポーネントを作る</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Star</span> <span style=color:#f92672>=</span> ({ <span style=color:#a6e22e>selected</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span> }) =&gt; <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>FaStar</span> <span style=color:#a6e22e>color</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>selected</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;red&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;grey&#34;</span>} <span style=color:#f92672>/&gt;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>StarRating</span>({ <span style=color:#a6e22e>totalStars</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span> }) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> [...Array(<span style=color:#a6e22e>totalStars</span>)].<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>i</span>) =&gt; <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Star</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>i</span>} <span style=color:#f92672>/&gt;</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=62-usestate-フック>6.2 useState フック</h2><p><code>StarRating</code> コンポーネントをクリックして援交できるようにするためには、ステートを使って星の数を保存する。関数コンポーネントでステートを使うためには、フック機能を使う。<code>React.useHook(default)</code> 関数は配列を返し、配列の第１要素はステート変数で、配列の第２要素はステート値を変更する関数である。</p><p>Ref: <a href=https://reactjs.org/docs/hooks-intro.html>Introducing Hooks</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Star</span> <span style=color:#f92672>=</span> ({ <span style=color:#a6e22e>selected</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>, <span style=color:#a6e22e>onSelect</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>f</span> =&gt; <span style=color:#a6e22e>f</span> }) =&gt; <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>FaStar</span> <span style=color:#a6e22e>color</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>selected</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;red&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;grey&#34;</span>} <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onSelect</span>} <span style=color:#f92672>/&gt;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>StarRating</span>({ <span style=color:#a6e22e>totalStars</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span> }) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>selectedStars</span>, <span style=color:#a6e22e>setSelectedStars</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useState</span>(<span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;&gt;</span>
</span></span><span style=display:flex><span>      {[...Array(<span style=color:#a6e22e>totalStars</span>)].<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>i</span>) =&gt; (
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Star</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>i</span>} <span style=color:#a6e22e>selected</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>selectedStars</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>i</span>} <span style=color:#a6e22e>onSelect</span><span style=color:#f92672>=</span>{() =&gt; <span style=color:#a6e22e>setSelectedSars</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>)} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      ))}
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>p</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>selectedStars</span>} <span style=color:#66d9ef>of</span> {<span style=color:#a6e22e>totalStars</span>} <span style=color:#a6e22e>stars</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/p&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>以前のバージョンの React のコード：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>StarRating</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>Component</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>props</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>super</span>(<span style=color:#a6e22e>props</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>state</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>starsSelected</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>change</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>change</span>.<span style=color:#a6e22e>bind</span>(<span style=color:#66d9ef>this</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>change</span>(<span style=color:#a6e22e>starsSelected</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>setState</span>({ <span style=color:#a6e22e>starsSelected</span> });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>render</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>totalStars</span> } <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>props</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>starsSelected</span> } <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>state</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;&gt;</span>
</span></span><span style=display:flex><span>        {[...Array(<span style=color:#a6e22e>totalStars</span>)].<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>i</span>) =&gt; (
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Star</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>i</span>} <span style=color:#a6e22e>selected</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>selectedStars</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>i</span>} <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{() =&gt; <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>change</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>)} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        ))}
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>p</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>selectedStars</span>} <span style=color:#66d9ef>of</span> {<span style=color:#a6e22e>totalStars</span>} <span style=color:#a6e22e>stars</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/p&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/&gt;</span>
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Note: <a href=https://reactjs.org/docs/handling-events.html>HTML のイベントハンドラと違って、React では camelCase であり、かつ、関数を値に渡す</a>、というのが重要なんだけれど、明記されていないような気がする。</p><h2 id=63-再利用性を高めるリファクタリング>6.3 再利用性を高めるリファクタリング</h2><p>React では CSS スタイルを文字列でなく JavaScript オブジェクトで表現できる。<a href=https://reactjs.org/docs/dom-elements.html#style>style - DOM Elements - React</a></p><p><code>{...props}</code> という記法で、props をまとめて JSX のプロパティに引き渡すことができる。<a href=https://reactjs.org/docs/jsx-in-depth.html#spread-attributes>Spread Attributes - JSX In Depth - React</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>StarRating</span>({ <span style=color:#a6e22e>style</span> <span style=color:#f92672>=</span> {}, <span style=color:#a6e22e>totalStars</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>, ...<span style=color:#a6e22e>props</span> }) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>selectedStars</span>, <span style=color:#a6e22e>setSelectedStars</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useState</span>(<span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span>{{ <span style=color:#a6e22e>padding</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, ...<span style=color:#a6e22e>style</span> }} {...<span style=color:#a6e22e>props</span>}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      {[...Array(<span style=color:#a6e22e>totalStars</span>)].<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>i</span>) =&gt; (
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Star</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>i</span>} <span style=color:#a6e22e>selected</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>selectedStars</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>i</span>} <span style=color:#a6e22e>onSelect</span><span style=color:#f92672>=</span>{() =&gt; <span style=color:#a6e22e>setSelectedSars</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>)} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      ))}
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>p</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>selectedStars</span>} <span style=color:#66d9ef>of</span> {<span style=color:#a6e22e>totalStars</span>} <span style=color:#a6e22e>stars</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/p&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=64-コンポーネントツリーのステート>6.4 コンポーネントツリーのステート</h2><p>たくさんのコンポーネントがステートを使うのはよいやり方じゃない。バグを追いかけたり変更をしたりするのが大変になるから。ステートは１ヶ所にまとめて管理するのがよい。そのための方法はいくつかあって、ここでは１つ目の方法を紹介する。コンポーネントツリーのルートにステートをもたせて、子コンポーネントには props を通して渡す。</p><p>&ldquo;Color Organizer&rdquo; アプリケーションを作るとする。色・そのタイトル・レーティングのリストを含んだサンプルのデータセット <code>color-data.json</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>[
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;0175d1f0-a8c6-41bf-8d02-df5734d829a4&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;ocean at dusk&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;color&#34;</span>: <span style=color:#e6db74>&#34;#00c4e2&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;rating&#34;</span>: <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;83c7ba2f-7392-4d7d-9e23-35adbe186046&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;lawn&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;color&#34;</span>: <span style=color:#e6db74>&#34;#26ac56&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;rating&#34;</span>: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;a11e3995-b0bd-4d58-8c48-5e49ae7f7f23&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;bright red&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;color&#34;</span>: <span style=color:#e6db74>&#34;#ff0000&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;rating&#34;</span>: <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>colorData</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;./color-data.json&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>App</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>colors</span>, <span style=color:#a6e22e>setColors</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useState</span>(<span style=color:#a6e22e>colorData</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>ColorList</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>colors</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>colors</span>}
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>onRateColor</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>rating</span>) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>setColors</span>(<span style=color:#a6e22e>colors</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>color</span> =&gt; <span style=color:#a6e22e>color</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>id</span> <span style=color:#f92672>?</span> { ...<span style=color:#a6e22e>color</span>, <span style=color:#a6e22e>rating</span> } <span style=color:#f92672>:</span> <span style=color:#a6e22e>color</span>))
</span></span><span style=display:flex><span>      }}
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>onRemoveColor</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>id</span> =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>setColors</span>(<span style=color:#a6e22e>colors</span>.<span style=color:#a6e22e>filter</span>(<span style=color:#a6e22e>color</span> =&gt; <span style=color:#a6e22e>color</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>id</span>))
</span></span><span style=display:flex><span>      }}
</span></span><span style=display:flex><span>    <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>ColorList</span>({ <span style=color:#a6e22e>colors</span> <span style=color:#f92672>=</span> [], <span style=color:#a6e22e>onRemoveColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>f</span> =&gt; <span style=color:#a6e22e>f</span>, <span style=color:#a6e22e>onRateColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>f</span> =&gt; <span style=color:#a6e22e>f</span> }) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>colors</span>.<span style=color:#a6e22e>length</span>) <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>No</span> <span style=color:#a6e22e>Colors</span> <span style=color:#a6e22e>Listed</span>. (<span style=color:#a6e22e>Add</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>Color</span>)<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;color-list&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>colors</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>color</span> =&gt; (
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Color</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>color</span>.<span style=color:#a6e22e>id</span>} {...<span style=color:#a6e22e>color</span>} <span style=color:#a6e22e>onRemove</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onRemoveColor</span>} <span style=color:#a6e22e>onRate</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onRateColor</span>} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      ))}
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Color</span>({ <span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>title</span>, <span style=color:#a6e22e>color</span>, <span style=color:#a6e22e>rating</span>, <span style=color:#a6e22e>onRemove</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>f</span> =&gt; <span style=color:#a6e22e>f</span>, <span style=color:#a6e22e>onRate</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>f</span> =&gt; <span style=color:#a6e22e>f</span> }) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>section</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>title</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>button</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{() =&gt; <span style=color:#a6e22e>onRemove</span>(<span style=color:#a6e22e>id</span>)}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>FaTrash</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/button&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span>{{ <span style=color:#a6e22e>height</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>50</span>, <span style=color:#a6e22e>backgroundColor</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>color</span> }} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>StarRating</span> <span style=color:#a6e22e>selectedStars</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>rating</span>} <span style=color:#a6e22e>onRate</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>rating</span> =&gt; <span style=color:#a6e22e>onRate</span>(<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>rating</span>)} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/section&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>公式ドキュメントでも、<a href=https://reactjs.org/docs/lifting-state-up.html>Lifting State Up</a> として紹介されている方法。</p><h2 id=65-フォームを作る>6.5 フォームを作る</h2><p><code>useRef</code> フックを使って <em>ref</em> を作ることで、DOM ノードを直接アクセスする。</p><p>Ref: <a href=https://reactjs.org/docs/hooks-reference.html#useref>useRef</a></p><p><code>txtTitle.current</code>, <code>hexColor.current</code> は <code>&lt;input /></code> 要素への参照になっている：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>AddColorForm</span>({ <span style=color:#a6e22e>onNewColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>f</span> =&gt; <span style=color:#a6e22e>f</span> }) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>txtTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useRef</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>hexColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useRef</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>submit</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>e</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>preventDefault</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>onNewColor</span>(<span style=color:#a6e22e>txtTitle</span>.<span style=color:#a6e22e>current</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>hexColor</span>.<span style=color:#a6e22e>current</span>.<span style=color:#a6e22e>value</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>txtTitle</span>.<span style=color:#a6e22e>current</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>hexTitle</span>.<span style=color:#a6e22e>current</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>form</span> <span style=color:#a6e22e>onSubmit</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>submit</span>}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>input</span> <span style=color:#a6e22e>ref</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>txtTitle</span>} <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;color title...&#34;</span> <span style=color:#a6e22e>required</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>input</span> <span style=color:#a6e22e>ref</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>hexColor</span>} <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;color&#34;</span> <span style=color:#a6e22e>required</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>buton</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>ADD</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/button&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/form&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><em>controlled component</em> では、React がフォームのステートをコントロールする：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>AddColorForm</span>({ <span style=color:#a6e22e>onNewColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>f</span> =&gt; <span style=color:#a6e22e>f</span> }) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>title</span>, <span style=color:#a6e22e>setTitle</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>color</span>, <span style=color:#a6e22e>setColor</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#39;#000000&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>submit</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>e</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>preventDefault</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>onNewColor</span>(<span style=color:#a6e22e>title</span>, <span style=color:#a6e22e>color</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setTitle</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setColor</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>form</span> <span style=color:#a6e22e>onSubmit</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>submit</span>}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>input</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>title</span>}
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>event</span> =&gt; <span style=color:#a6e22e>setTitle</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)}
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;color title...&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>required</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>input</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>color</span>}
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>event</span> =&gt; <span style=color:#a6e22e>setColor</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)}
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;color&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>required</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>buton</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>ADD</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/button&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/form&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><a href=https://reactjs.org/docs/uncontrolled-components.html>Uncntrolled Document - React</a> によれば、基本的に controlled component を使うことを勧めている。では uncontrolled component はどういう場面で使うといいのか、不明。</p><h2 id=66-react-コンテキスト>6.6 React コンテキスト</h2><p>コンポーネントツリーのルートにステートをまとめるのは、古いバージョンの React で広く使われてきたパターンだった。しかし、大規模アプリケーションになるとたくさんのステートを管理するのが大変になった。</p><p>React <em>context</em> がその代わりとなる手段になる。</p><p>Ref: <a href=https://reactjs.org/docs/context.html>Context - React</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>colorData</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./color-data&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>ReactDOM</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react-dom&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ColorContext</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>createContext</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>ColorProvider</span>({ <span style=color:#a6e22e>children</span> }) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>colors</span>, <span style=color:#a6e22e>setColors</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useState</span>(<span style=color:#a6e22e>colorData</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>addColor</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>title</span>, <span style=color:#a6e22e>color</span>) =&gt; <span style=color:#a6e22e>setColors</span>([...<span style=color:#a6e22e>colors</span>, { <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>uuid</span>.<span style=color:#a6e22e>v4</span>(), <span style=color:#a6e22e>rating</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>title</span>, <span style=color:#a6e22e>color</span> }]);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>rateColor</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>rating</span>) =&gt; <span style=color:#a6e22e>setColors</span>(<span style=color:#a6e22e>colors</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>color</span> =&gt; (<span style=color:#a6e22e>color</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>id</span> <span style=color:#f92672>?</span> { ...<span style=color:#a6e22e>color</span>, <span style=color:#a6e22e>rating</span> } <span style=color:#f92672>:</span> <span style=color:#a6e22e>color</span>)));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>removeColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>id</span> =&gt; <span style=color:#a6e22e>setColors</span>(<span style=color:#a6e22e>colors</span>.<span style=color:#a6e22e>filter</span>(<span style=color:#a6e22e>color</span> =&gt; <span style=color:#a6e22e>color</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>id</span>));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>ColorContext</span>.<span style=color:#a6e22e>Provider</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{{ <span style=color:#a6e22e>colors</span>, <span style=color:#a6e22e>addColor</span>, <span style=color:#a6e22e>removeColor</span>, <span style=color:#a6e22e>rateColor</span> }}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>children</span>}
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/ColorContext.Provider&gt;,</span>
</span></span><span style=display:flex><span>  )
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>App</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>AddColorForm</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>ColorList</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>ColorList</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>colors</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useContext</span>(<span style=color:#a6e22e>ColorContext</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>colors</span>.<span style=color:#a6e22e>length</span>) <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>No</span> <span style=color:#a6e22e>Colors</span> <span style=color:#a6e22e>Listed</span>. (<span style=color:#a6e22e>Add</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>Color</span>)<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;color-list&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>colors</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>color</span> =&gt; <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Color</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>color</span>.<span style=color:#a6e22e>id</span>} {...<span style=color:#a6e22e>color</span>} <span style=color:#f92672>/&gt;</span>)}
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Color</span>({ <span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>title</span>, <span style=color:#a6e22e>color</span>, <span style=color:#a6e22e>rating</span> }) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>rateColor</span>, <span style=color:#a6e22e>removeColor</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useContext</span>(<span style=color:#a6e22e>ColorContext</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>section</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>title</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>button</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{() =&gt; <span style=color:#a6e22e>removeColor</span>(<span style=color:#a6e22e>id</span>)}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>FaTrash</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/button&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span>{{ <span style=color:#a6e22e>height</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>50</span>, <span style=color:#a6e22e>backgroundColor</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>color</span> }} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>StarRating</span> <span style=color:#a6e22e>selectedStars</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>rating</span>} <span style=color:#a6e22e>onRate</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>rating</span> =&gt; <span style=color:#a6e22e>rateColor</span>(<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>rating</span>)} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/section&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>AddColorForm</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>title</span>, <span style=color:#a6e22e>setTitle</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>color</span>, <span style=color:#a6e22e>setColor</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#39;#000000&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>addColor</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useContext</span>(<span style=color:#a6e22e>ColorContext</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>submit</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>e</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>preventDefault</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>addColor</span>(<span style=color:#a6e22e>title</span>, <span style=color:#a6e22e>color</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setTitle</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setColor</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>form</span> <span style=color:#a6e22e>onSubmit</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>submit</span>}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>input</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>title</span>}
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>event</span> =&gt; <span style=color:#a6e22e>setTitle</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)}
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;color title...&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>required</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>input</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>color</span>}
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>event</span> =&gt; <span style=color:#a6e22e>setColor</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)}
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;color&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>required</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>buton</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>ADD</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/button&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/form&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ReactDOM</span>.<span style=color:#a6e22e>render</span>(
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>ColorProvider</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>App</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/ColorProvider&gt;</span>
</span></span><span style=display:flex><span>  document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#39;root&#39;</span>)
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><h1 id=7-enhancing-components-with-hooks>7 Enhancing Components with Hooks</h1><h2 id=71-introducing-useeffect>7.1 Introducing useEffect</h2><p><code>React.useEffect()</code> を使って、レンダリングのたびに副作用を起こす関数（エフェクト）を登録できる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Checkbox</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>checked</span>, <span style=color:#a6e22e>setChecked</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useState</span>(<span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useEffect</span>(() =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>checked</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;Yes, checked&#39;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No, not checked&#39;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;checkbox&#39;</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>checked</span>} <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{() =&gt; <span style=color:#a6e22e>setChecked</span>(<span style=color:#a6e22e>checked</span> =&gt; <span style=color:#f92672>!</span><span style=color:#a6e22e>checked</span>)} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>checked</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;checked&#39;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;not checked&#39;</span>}
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=72-the-dependency-array>7.2 The Dependency Array</h2><p><code>useEffect()</code> を使うと、レンダリングのたびにエフェクトが呼ばれる。第２引数に依存配列 (dependency array) を渡すことで、指定した値が変更されたときだけエフェクトが呼ばれるようになる：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>App</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>val</span>, <span style=color:#a6e22e>setVal</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>phrase</span>, <span style=color:#a6e22e>setPhrase</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useStater</span>(<span style=color:#e6db74>&#39;example phrase&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>createPhrase</span> <span style=color:#f92672>=</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setPhrase</span>(<span style=color:#a6e22e>val</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setVal</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>useEffect</span>(() =&gt; { <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`typing &#34;</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>val</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;`</span>); }, [<span style=color:#a6e22e>val</span>]);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>useEffect</span>(() =&gt; { <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`saved phrase: &#34;</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>phrase</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;`</span>); }, [<span style=color:#a6e22e>phrase</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>label</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Favorite</span> <span style=color:#a6e22e>phrase</span><span style=color:#f92672>:&lt;</span><span style=color:#960050;background-color:#1e0010>/label&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>input</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>val</span>} <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>phrase</span>} <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>e</span> =&gt; <span style=color:#a6e22e>setVal</span>(<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>button</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>createPhrase</span>}<span style=color:#f92672>&gt;</span><span style=color:#a6e22e>send</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/button&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>空の依存配列は、最初のレンダリングのときだけ呼び出される。</p><p>エフェクトが関数を返すと、その関数はコンポーネントがツリーから削除されたときに呼ばれる。つまり、クリーンアップに使える。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>useJazzyNews</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>posts</span>, <span style=color:#a6e22e>setPosts</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useSate</span>([]);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>addPost</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>post</span> =&gt; <span style=color:#a6e22e>setPosts</span>(<span style=color:#a6e22e>allPosts</span> =&gt; [<span style=color:#a6e22e>post</span>, ...<span style=color:#a6e22e>allPosts</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>useEffect</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>newsFeed</span>.<span style=color:#a6e22e>subscribe</span>(<span style=color:#a6e22e>addPost</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> () =&gt; <span style=color:#a6e22e>newsFeed</span>.<span style=color:#a6e22e>unsubscribe</span>(<span style=color:#a6e22e>addPost</span>);
</span></span><span style=display:flex><span>  }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>useEffect</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>welcomeChime</span>.<span style=color:#a6e22e>play</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> () =&gt; <span style=color:#a6e22e>goodbyeChime</span>.<span style=color:#a6e22e>play</span>();
</span></span><span style=display:flex><span>  }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>posts</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=73-when-to-uselayouteffect>7.3 When to useLayoutEffect</h2><p><code>useLayoutEffect()</code> は <code>useEffect()</code> とは少し違うタイミングで呼び出される。通常は <code>useEffect()</code> を使えばよいが、エフェクトがブラウザ描画に不可欠なものなら、<code>useLayoutEffect()</code> を使う。</p><ol><li>レンダリングする。</li><li><code>useLayoutEffect</code> が呼ばれる。</li><li>ブラウザが描画する。コンポーネント要素が実際に DOM に追加されるとき。</li><li><code>useEffect</code> が呼ばれる。</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>useWindowSize</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>size</span>, <span style=color:#a6e22e>setSize</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useState</span>([<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>resize</span> <span style=color:#f92672>=</span> () =&gt; <span style=color:#a6e22e>setSize</span>([window.<span style=color:#a6e22e>innerWidth</span>, window.<span style=color:#a6e22e>innerHeight</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>useLayoutEffect</span>(() =&gt; {
</span></span><span style=display:flex><span>    window.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#39;resize&#39;</span>, <span style=color:#a6e22e>resize</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>resize</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> () =&gt; window.<span style=color:#a6e22e>removeEventListener</span>(<span style=color:#e6db74>&#39;resize&#39;</span>, <span style=color:#a6e22e>resize</span>);
</span></span><span style=display:flex><span>  }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>size</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>useMousePosition</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>position</span>, <span style=color:#a6e22e>setPosition</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useState</span>({<span style=color:#a6e22e>x</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>y</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>useLayoutEffect</span>(() =&gt; {
</span></span><span style=display:flex><span>    window.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#39;mousemove&#39;</span>, <span style=color:#a6e22e>setPosition</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> () =&gt; window.<span style=color:#a6e22e>removeEventListener</span>(<span style=color:#e6db74>&#39;mousemove&#39;</span>, <span style=color:#a6e22e>setPosition</span>);
</span></span><span style=display:flex><span>  }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>position</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=74-rules-to-follow-with-hooks>7.4 Rules to Follow with Hooks</h2><ul><li>フックはコンポーネントのスコープの中でのみ動く。</li><li>機能ごとに複数のフックに分けるとよい。</li><li>フックはトップレベルからのみ呼ぶべき。</li></ul><h2 id=75-improving-code-with-reducer>7.5 Improving Code with Reducer</h2><p><code>useReducer()</code> は、第１引数に reducer 関数をとり、第２引数に初期値をとる。reducer 関数は現在のステートを受け取り新しいステートを返す。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>functin</span> <span style=color:#a6e22e>Checkbox</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>checked</span>, <span style=color:#a6e22e>setChecked</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useReducer</span>(<span style=color:#a6e22e>checked</span> =&gt; <span style=color:#f92672>!</span><span style=color:#a6e22e>checked</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;checkbox&#34;</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>checked</span>} <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>setChecked</span>} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>checked</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;checked&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;not checked&#34;</span>}
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=75-usereducer-to-handle-complex-state>7.5 useReducer to Handle Complex State</h2><h2 id=76-improving-component-performance>7.6 Improving Component Performance</h2><h2 id=77-shouldcomponentupdate-and-purecomponent>7.7 shouldComponentUpdate and PureComponent</h2><h2 id=78-when-to-refactor>7.8 When to Refactor</h2><h1 id=8-incorporating-data>8 Incorporating Data</h1><h2 id=81-requesting-data>8.1 Requesting Data</h2><p>JavaScript では、HTTP リクエストを行う一番ポピュラーな方法は fetch を使うこと。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>`https://api.github.com/users/moonhighway`</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>response</span> =&gt; <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>json</span>())
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>);
</span></span></code></pre></div><p>これは URL <code>https://api.github.com/users/moonhighway</code> への非同期リクエストを送る。レスポンスは <code>.then(callback)</code> メソッドを使ってコールバックに渡され、レスポンスデータを JSON としてパースする。パースした JSON の結果をコンソールにログ出力する。何か問題が発生すれば、<code>console.error</code> メソッドでエラー出力する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>App</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>login</span>, <span style=color:#a6e22e>setLogin</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#39;moonhighway&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>repo</span>, <span style=color:#a6e22e>setRepo</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#39;learning-react&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleSearch</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>login</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>login</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>setLogin</span>(<span style=color:#a6e22e>login</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setLogin</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setRepo</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>login</span>) <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>SearchForm</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>login</span>} <span style=color:#a6e22e>onSearch</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handleSearch</span>} <span style=color:#f92672>/&gt;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>GitHubUser</span> <span style=color:#a6e22e>login</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>login</span>} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>UserRepositories</span> <span style=color:#a6e22e>login</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>login</span>} <span style=color:#a6e22e>repo</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>repo</span>} <span style=color:#a6e22e>onSelect</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>setRepo</span>} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Fetch</span>({ <span style=color:#a6e22e>uri</span>, <span style=color:#a6e22e>renderSuccess</span>, <span style=color:#a6e22e>loadingFallback</span> <span style=color:#f92672>=</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>p</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>loading</span>...<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/p&gt;, renderError = error =&gt; (&lt;pre&gt;{JSON.stringify(error, null, 2)}&lt;/pre&gt;)}) {</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>data</span>, <span style=color:#a6e22e>setData</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useState</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>error</span>, <span style=color:#a6e22e>setError</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useState</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>loading</span>, <span style=color:#a6e22e>setLoading</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useState</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useEffect</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>uri</span>) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>uri</span>)
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>data</span> =&gt; <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>json</span>())
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>setData</span>)
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>then</span>(() =&gt; <span style=color:#a6e22e>setLoading</span>(<span style=color:#66d9ef>false</span>))
</span></span><span style=display:flex><span>      .<span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>setError</span>);
</span></span><span style=display:flex><span>  }, [<span style=color:#a6e22e>uri</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>loading</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>loadingFallback</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>error</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>renderError</span>(<span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>renderSuccess</span>({ <span style=color:#a6e22e>data</span> });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>GitHubUser</span>({ <span style=color:#a6e22e>login</span> }) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userDetails</span> <span style=color:#f92672>=</span> ({ <span style=color:#a6e22e>data</span> }) =&gt; (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;githubUser&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>img</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>avatar_url</span>} <span style=color:#a6e22e>alt</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>login</span>} <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span>{{ <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>200</span> }} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>login</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;</span>
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>p</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>name</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/p&gt;}</span>
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>location</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>p</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>location</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/p&gt;}</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Fetch</span> <span style=color:#a6e22e>uri</span><span style=color:#f92672>=</span>{<span style=color:#e6db74>`https://api.github.com/users/</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>login</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>}<span style=color:#a6e22e>renderSuccess</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>userDetails</span>} <span style=color:#f92672>/&gt;</span>;
</span></span><span style=display:flex><span>  )
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>useIterator</span>(<span style=color:#a6e22e>items</span> <span style=color:#f92672>=</span> [], <span style=color:#a6e22e>initialValue</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>index</span>, <span style=color:#a6e22e>setIndex</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useState</span>(<span style=color:#a6e22e>initialValue</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>prev</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useCallback</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>index</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>setIndex</span>(<span style=color:#a6e22e>items</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setIndex</span>(<span style=color:#a6e22e>index</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  }, [<span style=color:#a6e22e>index</span>]);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>next</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useCallback</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>index</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>items</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span><span style=color:#a6e22e>ndex</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>setIndex</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setIndex</span>(<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  }, [<span style=color:#a6e22e>index</span>]);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>item</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useMemo</span>(() =&gt; <span style=color:#a6e22e>items</span>[<span style=color:#a6e22e>index</span>], [<span style=color:#a6e22e>index</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> [<span style=color:#a6e22e>item</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>items</span>[<span style=color:#ae81ff>0</span>], <span style=color:#a6e22e>prev</span>, <span style=color:#a6e22e>next</span>];
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>RepoMenu</span>({ <span style=color:#a6e22e>repositories</span>, <span style=color:#a6e22e>onSelct</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>f</span> =&gt; <span style=color:#a6e22e>f</span>}) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [{ <span style=color:#a6e22e>name</span> }, <span style=color:#a6e22e>previous</span>, <span style=color:#a6e22e>next</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useIterator</span>(<span style=color:#a6e22e>repositories</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>useEffect</span>(() =&gt; { <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>name</span>) <span style=color:#a6e22e>onSelect</span>(<span style=color:#a6e22e>name</span>); }, [<span style=color:#a6e22e>name</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span>{{ <span style=color:#a6e22e>display</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;flex&#39;</span> }}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>button</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>previous</span>}<span style=color:#f92672>&gt;&amp;</span><span style=color:#a6e22e>lt</span>;<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/button&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>p</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>name</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/p&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>button</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>next</span>}<span style=color:#f92672>&gt;&amp;</span><span style=color:#a6e22e>gt</span>;<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/button&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>UserRepositories</span>({ <span style=color:#a6e22e>login</span>, <span style=color:#a6e22e>selectedRepo</span>, <span style=color:#a6e22e>onSelect</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>f</span> =&gt; <span style=color:#a6e22e>f</span>}) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>renderSuccess</span> <span style=color:#f92672>=</span> ({ <span style=color:#a6e22e>data</span> }) =&gt; <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>RepoMenu</span> <span style=color:#a6e22e>repositories</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>data</span>} <span style=color:#a6e22e>selectedRepo</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>selectedRepo</span>} <span style=color:#a6e22e>onSelect</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onSelect</span>} <span style=color:#f92672>/&gt;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Fetch</span> <span style=color:#a6e22e>uri</span><span style=color:#f92672>=</span>{<span style=color:#e6db74>`https://api.github.com/users/</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>login</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/repos`</span>} <span style=color:#a6e22e>renderSuccess</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>renderSuccess</span>} <span style=color:#f92672>/&gt;</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=84-introducing-graphql>8.4 Introducing GraphQL</h2><p>GraphQL を扱うライブラリはたくさんあるが、ここでは <code>graphql-request</code> を使う。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npm i graphql-request
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>GraphQLClient</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;graphql-request&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>query</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`
</span></span></span><span style=display:flex><span><span style=color:#e6db74>query findRepos($login:String!) {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  user(login: $login) {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    login
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    name
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    location
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    repositories(first:100) {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      totalCount
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      nodes {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        name
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>`</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>client</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>GraphQLClient</span>(<span style=color:#e6db74>&#39;https://api.github.com/graphql&#39;</span>, { <span style=color:#a6e22e>headers</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>Authorization</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Bearer &lt;PERSONAL_ACCESS_TOKEN&gt;&#39;</span> } });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>client</span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>request</span>(<span style=color:#a6e22e>query</span>, { <span style=color:#a6e22e>login</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;moontahoe&#39;</span> })
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>results</span> =&gt; <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>results</span>, <span style=color:#66d9ef>null</span>, <span style=color:#ae81ff>2</span>))
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>actch</span>(<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>);
</span></span></code></pre></div><p>レスポンス：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;data&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;user&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;login&#34;</span>: <span style=color:#e6db74>&#34;MoonTahoe&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Alex Banks&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;location&#34;</span>: <span style=color:#e6db74>&#34;Tahoe City, CA&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;repositories&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;totalCount&#34;</span>: <span style=color:#ae81ff>51</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;nodes&#34;</span>: [
</span></span><span style=display:flex><span>          {
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;snowtooth&#34;</span>
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>          <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        ]
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=9-suspense>9 Suspense</h1><h2 id=91-error-boundaries>9.1 Error Boundaries</h2><p>Ref: <a href=https://reactjs.org/docs/error-boundaries.html>https://reactjs.org/docs/error-boundaries.html</a></p><h2 id=92-code-splitting>9.2 Code Splitting</h2><p>Ref: <a href=https://reactjs.org/docs/code-splitting.html>https://reactjs.org/docs/code-splitting.html</a></p><h2 id=93-introducing-the-suspense-componennt>9.3 Introducing: The Suspense Componennt</h2><p>Ref: <a href=https://reactjs.org/docs/concurrent-mode-suspense.html>https://reactjs.org/docs/concurrent-mode-suspense.html</a></p><h1 id=10-react-testing>10 React Testing</h1><h2 id=101-eslint>10.1 ESLint</h2><p><a href=https://eslint.org/>ESLint</a> は JavaScript 用の最新のコードリンタである。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npm install eslint --save-dev
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>npx eslint --init
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>npx eslint .
</span></span></code></pre></div><h2 id=102-eslint-plug-ins>10.2 ESLint Plug-Ins</h2><p><code>.eslintrc.json</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;plugins&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#e6db74>&#34;react-hooks&#34;</span>
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;rules&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;react-hooks/rules-of-hooks&#34;</span>: <span style=color:#e6db74>&#34;error&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;react-hooks/exhaustive-deps&#34;</span>: <span style=color:#e6db74>&#34;warn&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=103-prettier>10.3 Prettier</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npm install -g prettier
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>npm install eslint-config-prettier eslint-plugin--prettier --save-dev
</span></span><span style=display:flex><span><span style=color:#75715e># {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   &#34;extends&#34;: [&#34;plugin:prettier/recommended&#34;],</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   &#34;plugins&#34;: [&#34;prettier&#34;],</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   &#34;rules&#34;: [&#34;prettier/prettier&#34;: &#34;error&#34;]</span>
</span></span><span style=display:flex><span><span style=color:#75715e># }</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>npx prettier --write <span style=color:#e6db74>&#34;src/*.js&#34;</span>
</span></span></code></pre></div><h2 id=104-typechecking-for-react-applications>10.4 Typechecking for React Applications</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npx create-react-app my-type --template typescript
</span></span></code></pre></div><h2 id=105-test-driven-development>10.5 Test-Driven Development</h2><p><code>Star.test.js</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Star</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./Star&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;Star&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>test</span>(<span style=color:#e6db74>&#39;renders a star&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>div</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#39;div&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ReactDOM</span>.<span style=color:#a6e22e>render</span>(<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Star</span> <span style=color:#f92672>/&gt;</span>, <span style=color:#a6e22e>div</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>div</span>.<span style=color:#a6e22e>querySelector</span>(<span style=color:#e6db74>&#39;svg&#39;</span>)).<span style=color:#a6e22e>toHaveAttribute</span>(<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;hotdog&#39;</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p><code>Checkbox.test.js</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>render</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@testing-librarry/react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Checkbox</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./Checkbox&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;Checkbox&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>test</span>(<span style=color:#e6db74>&#39;Selecting the checkbox should toggle its value&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>getByLabelText</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>render</span>(<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Checkbox</span> <span style=color:#f92672>/&gt;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>checkbox</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getByLabelText</span>(<span style=color:#e6db74>/not checked/i</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fireEvent</span>.<span style=color:#a6e22e>click</span>(<span style=color:#a6e22e>checkbox</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>checkbox</span>.<span style=color:#a6e22e>checked</span>).<span style=color:#a6e22e>toEqual</span>(<span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fireEvent</span>.<span style=color:#a6e22e>Click</span>(<span style=color:#a6e22e>checkbox</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>checkbox</span>.<span style=color:#a6e22e>checked</span>).<span style=color:#a6e22e>toEqual</span>(<span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h2 id=106-using-code-coverage>10.6 Using Code Coverage</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npm test -- --coverage
</span></span></code></pre></div><h1 id=11-react-router>11 React Router</h1><p>Angular, Ember, Backbone と違って、React は標準ルータを持っていない。<a href=https://reactrouter.com/>React Router</a> ライブラリが作られ、広く使われている。</p><p><code>pages.js</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Link</span>, <span style=color:#a6e22e>useLocation</span>, <span style=color:#a6e22e>useParams</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react-router-dom&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Home</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span>[<span style=color:#a6e22e>Compoany</span> <span style=color:#a6e22e>Website</span>]<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>nav</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Liink</span> <span style=color:#a6e22e>to</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;about&#39;</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>About</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/Link&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Liink</span> <span style=color:#a6e22e>to</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;events&#39;</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Events</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/Link&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Liink</span> <span style=color:#a6e22e>to</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;products&#39;</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Products</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/Link&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Liink</span> <span style=color:#a6e22e>to</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;contact&#39;</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Contact</span> <span style=color:#a6e22e>Us</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/Link&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/nav&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>About</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span>[<span style=color:#a6e22e>About</span>]<span style=color:#f92672>&lt;</span><span style=color:#e6db74>/h1&gt;&lt;Outlet /</span><span style=color:#f92672>&gt;&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Events</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span>[<span style=color:#a6e22e>Events</span>]<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;&lt;/div&gt;;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Products</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span>[<span style=color:#a6e22e>Products</span>]<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;&lt;/div&gt;;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Product</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> { <span style=color:#a6e22e>id</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>useParams</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span>[<span style=color:#a6e22e>Product</span> {<span style=color:#a6e22e>id</span>}]<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;&lt;/div&gt;;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Contact</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span>[<span style=color:#a6e22e>Contact</span>]<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;&lt;/div&gt;;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Whoops404</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Resource</span> <span style=color:#a6e22e>not</span> <span style=color:#a6e22e>found</span> <span style=color:#a6e22e>at</span> {<span style=color:#a6e22e>useLocation</span>().<span style=color:#a6e22e>pathname</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;&lt;/div&gt;;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Services</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>section</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h2</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Our</span> <span style=color:#a6e22e>Services</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h2&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>p</span><span style=color:#f92672>&gt;</span>...<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/p&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/section&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>&lt;Outlet /></code> が使われているけど、2021/01/09 段階ではまだベータバージョンの v6 の機能だった。また v6 自体がなんかしばらく更新がない。</p><p><code>App.js</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Routes</span>, <span style=color:#a6e22e>Route</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react-router-dom&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Home</span>, <span style=color:#a6e22e>About</span>, <span style=color:#a6e22e>Events</span>, <span style=color:#a6e22e>Products</span>, <span style=color:#a6e22e>Contact</span>, <span style=color:#a6e22e>Whoops404</span>, <span style=color:#a6e22e>Services</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./pages&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>App</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Routes</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Home</span> <span style=color:#f92672>/&gt;</span>} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/about&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>About</span> <span style=color:#f92672>/&gt;</span>}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;services&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Services</span> <span style=color:#f92672>/&gt;</span>} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/Route&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/events&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Events</span> <span style=color:#f92672>/&gt;</span>} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/products&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Products</span> <span style=color:#f92672>/&gt;</span>} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/products/:id&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Products</span> <span style=color:#f92672>/&gt;</span>} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/contact&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Contact</span> <span style=color:#f92672>/&gt;</span>} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;*&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>WHoops404</span> <span style=color:#f92672>/&gt;</span>} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/Routes&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>リダイレクトは <code>Redirect</code> コンポーネントを使う：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Routes</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Redirect</span> <span style=color:#a6e22e>from</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;services&#34;</span> <span style=color:#a6e22e>to</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;about/services&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/Routes&gt;</span>
</span></span></code></pre></div><h1 id=12-react-and-the-server>12 React and the Server</h1><p><em>イソモーフィック(isomorphic)</em> と <em>ユニバーサル(universal)</em> は、クライアントとサーバの両方で動くアプリケーションを意味する。イソモーフィックなアプリケーションは、複数のプラットフォームでレンダリングできること。ユニバーサルなアプリケーションは、複数の環境で同じコードで動くことを意味する。</p><h2 id=124-server-rendering-with-nextjs>12.4 Server Rendering with Next.js</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mkdir project-next
</span></span><span style=display:flex><span>cd project-next
</span></span><span style=display:flex><span>npm init -y
</span></span><span style=display:flex><span>npm install --save react react-dom next
</span></span><span style=display:flex><span>mkdir pages
</span></span></code></pre></div><p><code>pages/Header.js</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Link</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;next/link&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Header</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Link</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/&#34;</span><span style=color:#f92672>&gt;&lt;</span><span style=color:#a6e22e>a</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Home</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/a&gt;&lt;/Link&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Link</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/pets&#34;</span><span style=color:#f92672>&gt;&lt;</span><span style=color:#a6e22e>a</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Pets</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/a&gt;&lt;/Link&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>  )
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>pages/index.js</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Header</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./Header&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Index</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Header</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Hello</span> <span style=color:#a6e22e>everyone</span><span style=color:#f92672>!&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>  )
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></section></article><div class=column><div class="tags has-addons"><span class="tag is-dark">Created at</span>
<span class=tag><time datetime=2021-01-04T00:07:23+09:00>2021/01/04 00:07:23</time></span></div><div class="tags has-addons"><span class="tag is-dark">Tags</span>
<a href=/tags/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0 class="tag is-link">プログラミング</a></div></div></div></div></div><footer class=footer><div class="content has-text-centered"><p>Written by tn.</p><p>Generated by <a href=https://gohugo.io/>Hugo</a>.</p></div></footer></body></html>